<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SCRIMMAGE: /root/scrimmage/scrimmage/src/entity/External.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SCRIMMAGE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('External_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">External.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="External_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Autonomy_8h.html">scrimmage/autonomy/Autonomy.h</a>&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="MotionModel_8h.html">scrimmage/motion/MotionModel.h</a>&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="FileSearch_8h.html">scrimmage/common/FileSearch.h</a>&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Random_8h.html">scrimmage/common/Random.h</a>&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="RTree_8h.html">scrimmage/common/RTree.h</a>&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Time_8h.html">scrimmage/common/Time.h</a>&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="GlobalService_8h.html">scrimmage/common/GlobalService.h</a>&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="External_8h.html">scrimmage/entity/External.h</a>&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Log_8h.html">scrimmage/log/Log.h</a>&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Metrics_8h.html">scrimmage/metrics/Metrics.h</a>&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Controller_8h.html">scrimmage/motion/Controller.h</a>&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="MissionParse_8h.html">scrimmage/parse/MissionParse.h</a>&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ParseUtils_8h.html">scrimmage/parse/ParseUtils.h</a>&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="PluginManager_8h.html">scrimmage/plugin_manager/PluginManager.h</a>&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Network_8h.html">scrimmage/pubsub/Network.h</a>&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Sensor_8h.html">scrimmage/sensor/Sensor.h</a>&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="SimUtils_8h.html">scrimmage/simcontrol/SimUtils.h</a>&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Interface_8h.html">scrimmage/network/Interface.h</a>&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="EntityInteraction_8h.html">scrimmage/simcontrol/EntityInteraction.h</a>&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &lt;GeographicLib/Geocentric.hpp&gt;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &lt;GeographicLib/LocalCartesian.hpp&gt;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &lt;boost/range/adaptor/map.hpp&gt;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &lt;boost/range/adaptor/filtered.hpp&gt;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &lt;boost/range/adaptor/transformed.hpp&gt;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &lt;boost/range/algorithm/copy.hpp&gt;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &lt;boost/range/algorithm/find_if.hpp&gt;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &lt;boost/range/algorithm/for_each.hpp&gt;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">using</span> std::endl;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">using</span> std::cout;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">namespace </span>ba = boost::adaptors;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">namespace </span>br = boost::range;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacescrimmage.html">scrimmage</a> {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a2865c163954044accfc31a33aa8fe56d">   75</a></span>&#160;<a class="code" href="classscrimmage_1_1External.html#a2865c163954044accfc31a33aa8fe56d">External::External</a>() :</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    entity_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classscrimmage_1_1Entity.html">Entity</a>&gt;()),</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    plugin_manager_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classscrimmage_1_1PluginManager.html">PluginManager</a>&gt;()),</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    log_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classscrimmage_1_1Log.html">Log</a>&gt;()),</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    last_t_(NAN),</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    pubsub_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classscrimmage_1_1PubSub.html">PubSub</a>&gt;()),</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    time_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classscrimmage_1_1Time.html">Time</a>&gt;()),</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    param_server_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classscrimmage_1_1ParameterServer.html">ParameterServer</a>&gt;()),</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    global_services_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classscrimmage_1_1GlobalService.html">GlobalService</a>&gt;()),</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    mp_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classscrimmage_1_1MissionParse.html">MissionParse</a>&gt;()),</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    id_to_team_map_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="namespacestd.html">std</a>::unordered_map&lt;int, int&gt;&gt;()),</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    id_to_ent_map_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="namespacestd.html">std</a>::unordered_map&lt;int, <a class="code" href="namespacescrimmage.html#a17ade668c6d5b5e127ec503e42eb22fa">EntityPtr</a>&gt;&gt;()),</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    shape_queue_max_size_(0) {}</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#abfe2575c7c24a18b62523624bbaf2c48">   89</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classscrimmage_1_1External.html#abfe2575c7c24a18b62523624bbaf2c48">External::print_plugins</a>(std::ostream &amp;out)<span class="keyword"> const </span>{</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;====== SCRIMMAGE Plugins Loaded =======&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;----------- Network ------------&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;kv : *<a class="code" href="classscrimmage_1_1External.html#a7bdc81c4f4aa5d36c8164b80acf9e027">networks_</a>) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        out &lt;&lt; kv.first &lt;&lt; endl;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;------ Entity Interaction ------&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacescrimmage.html#a1907aa8ca5f47fe16b9639b110b4ec91">EntityInteractionPtr</a> ei:  <a class="code" href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">ent_inters_</a>) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        out &lt;&lt; ei-&gt;name() &lt;&lt; endl;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;----------- Metrics ------------&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacescrimmage.html#ab7d3fe5e4e0cddb46b9763146f410a90">MetricsPtr</a> m : <a class="code" href="classscrimmage_1_1External.html#ae962c5970fd5e9132159423a52b54ef3">metrics_</a>) {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        out &lt;&lt; m-&gt;name() &lt;&lt; endl;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;print_plugins(out);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a673bcb7974404e98eb0b02724f073063">  106</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classscrimmage_1_1External.html#a673bcb7974404e98eb0b02724f073063">External::create_entity</a>(<span class="keyword">const</span> std::string &amp;mission_file,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                             <span class="keyword">const</span> std::string &amp;entity_tag,</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                             <span class="keyword">const</span> std::string &amp;plugin_tags_str,</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                             <span class="keywordtype">int</span> entity_id,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                             <span class="keywordtype">int</span> max_entities,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                             <span class="keywordtype">double</span> init_time,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                             <span class="keywordtype">double</span> init_dt,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                             <span class="keyword">const</span> std::string &amp;log_dir,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                             std::function&lt;<span class="keywordtype">void</span>(std::map&lt;std::string, std::string&gt;&amp;)&gt; param_override_func,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                             <span class="keyword">const</span> std::string&amp; mission_file_overrides,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; debug_level) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// Find the mission file</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keyword">auto</span> found_mission_file = <a class="code" href="classscrimmage_1_1FileSearch.html">FileSearch</a>().<a class="code" href="classscrimmage_1_1FileSearch.html#a2f43920f05f0c385988681750cd81508">find_mission</a>(mission_file);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (not found_mission_file) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Failed to load mission file: &quot;</span> &lt;&lt; mission_file &lt;&lt; endl;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// Parse the mission file</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a> = std::make_shared&lt;MissionParse&gt;();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;set_overrides(mission_file_overrides);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (not <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;parse(*found_mission_file)) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Failed to parse mission file: &quot;</span> &lt;&lt; *found_mission_file &lt;&lt; endl;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ac3279307c0d738fcc860bdf5808c43c4">log_</a> = std::make_shared&lt;Log&gt;();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a27d7c600b2343bdea6cfe21dc2d367b7">setup_logging</a>(log_dir);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// Parse the entity name and find the entity block ID for the associated</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// entity name</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keyword">auto</span> it_name_id = <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;entity_tag_to_id().find(entity_tag);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> (it_name_id == <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;entity_tag_to_id().end()) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Entity name (&quot;</span> &lt;&lt; entity_tag &lt;&lt; <span class="stringliteral">&quot;) not found in mission file&quot;</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;             &lt;&lt; endl;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// If there aren&#39;t any networks defined, define the GlobalNetwork by</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// default.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;network_names().size() == 0) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;network_names().push_back(<span class="stringliteral">&quot;GlobalNetwork&quot;</span>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a14f5a54a9c3757a3071590c03d096989">set_time</a>(init_time, init_dt);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="namespacescrimmage.html#a521c93afebfa6772260f6a65ef38cc62">ContactMapPtr</a> contacts = std::make_shared&lt;ContactMap&gt;();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    std::shared_ptr&lt;RTree&gt; rtree = std::make_shared&lt;RTree&gt;();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    rtree-&gt;init(max_entities);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="namespacescrimmage.html#a170223bf5a035097455993b6c9749522">FileSearchPtr</a> file_search = std::make_shared&lt;FileSearch&gt;();</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="namespacescrimmage.html#a3d47a78c5b6edf6dd7836d57ab79f320">RandomPtr</a> random = std::make_shared&lt;Random&gt;();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    random-&gt;seed();</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    std::list&lt;scrimmage_proto::ShapePtr&gt; shapes;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="structscrimmage_1_1SimUtilsInfo.html">SimUtilsInfo</a> sim_info;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    sim_info.<a class="code" href="structscrimmage_1_1SimUtilsInfo.html#a3da5af1536ce6a765cc94051e6acfa08">mp</a> = <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    sim_info.<a class="code" href="structscrimmage_1_1SimUtilsInfo.html#a7f89ca4e2c18425d51f47c2560a507cb">plugin_manager</a> = <a class="code" href="classscrimmage_1_1External.html#a9926a795157304cdd41f4c80f1279585">plugin_manager_</a>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    sim_info.<a class="code" href="structscrimmage_1_1SimUtilsInfo.html#a4b69cc9211a3193a340553ac52378d6a">file_search</a> = file_search;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    sim_info.<a class="code" href="structscrimmage_1_1SimUtilsInfo.html#a716ee3642d3a08c1e8791c4c0317515b">rtree</a> = rtree;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    sim_info.<a class="code" href="structscrimmage_1_1SimUtilsInfo.html#a2637c167508d1f7a7822ab272d7ba293">pubsub</a> = <a class="code" href="classscrimmage_1_1External.html#a0b87e4c91367deca3bbf190ebbadb436">pubsub_</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    sim_info.<a class="code" href="structscrimmage_1_1SimUtilsInfo.html#a456ce81c13dd8019dc76b219dbcdf256">time</a> = <a class="code" href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">time_</a>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    sim_info.<a class="code" href="structscrimmage_1_1SimUtilsInfo.html#a6439937c5a654eda94ec0588685358b5">random</a> = random;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    sim_info.<a class="code" href="structscrimmage_1_1SimUtilsInfo.html#a230655400479c5feb80ea991625d8423">id_to_team_map</a> = <a class="code" href="classscrimmage_1_1External.html#ab675b68837b5fa8c217a8f1515654382">id_to_team_map_</a>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    sim_info.<a class="code" href="structscrimmage_1_1SimUtilsInfo.html#a43e723837b00a050b6a026a85508ab31">id_to_ent_map</a> = <a class="code" href="classscrimmage_1_1External.html#afb226b57318a74990023a0d3f996c888">id_to_ent_map_</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">auto</span> plugin_tags = str2container&lt;std::set&lt;std::string&gt;&gt;(plugin_tags_str, <span class="stringliteral">&quot;, &quot;</span>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a7bdc81c4f4aa5d36c8164b80acf9e027">networks_</a> = std::make_shared&lt;NetworkMap&gt;();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacescrimmage.html#aa24d13008157fe3a539bb06b4ce5fb1d">create_networks</a>(sim_info, *networks_, plugin_tags, param_override_func)) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;External::create_entity() failed on create_networks()&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ae962c5970fd5e9132159423a52b54ef3">metrics_</a>.clear();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacescrimmage.html#ab7ce57ecde5f7e0a5489f75fa840b57a">create_metrics</a>(sim_info, contacts, <a class="code" href="classscrimmage_1_1External.html#ae962c5970fd5e9132159423a52b54ef3">metrics_</a>, plugin_tags, param_override_func)) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;External::create_entity() failed on create_metrics()&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">ent_inters_</a>.clear();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacescrimmage.html#a5793c16ebb382bf91a7a83d536fe49a7">create_ent_inters</a>(sim_info, contacts, shapes, <a class="code" href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">ent_inters_</a>, <a class="code" href="classscrimmage_1_1External.html#a933a6df36f2dcfe2be1cc364d15d4443">global_services_</a>, plugin_tags, param_override_func)) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;External::create_entity() failed on create_ent_inters()&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a> = std::make_shared&lt;Entity&gt;();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;set_random(random);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;contacts() = contacts;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;rtree() = rtree;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;state() = std::make_shared&lt;State&gt;();</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#acab091bf1e7c47025c8598edcdb4464c">call_update_contacts</a>(<a class="code" href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">time_</a>-&gt;t());</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;contacts()-&gt;find(entity_id);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (it != <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;contacts()-&gt;end()) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;entity_descriptions()[it_name_id-&gt;second][<span class="stringliteral">&quot;team_id&quot;</span>] = std::to_string(it-&gt;second.id().team_id());</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    std::map&lt;std::string, std::string&gt; info =</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;entity_descriptions()[it_name_id-&gt;second];</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="namespacescrimmage.html#ac60a75c7947b3d87cbaa1060cb430af4">AttributeMap</a> &amp;attr_map = <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;entity_attributes()[it_name_id-&gt;second];</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">bool</span> ent_success =</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;init(</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            attr_map, info, <a class="code" href="classscrimmage_1_1External.html#ab675b68837b5fa8c217a8f1515654382">id_to_team_map_</a>, <a class="code" href="classscrimmage_1_1External.html#afb226b57318a74990023a0d3f996c888">id_to_ent_map_</a>, contacts, <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>,</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;projection(), entity_id,</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            it_name_id-&gt;second, <a class="code" href="classscrimmage_1_1External.html#a9926a795157304cdd41f4c80f1279585">plugin_manager_</a>, file_search, rtree, <a class="code" href="classscrimmage_1_1External.html#a0b87e4c91367deca3bbf190ebbadb436">pubsub_</a>,</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <a class="code" href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">time_</a>, <a class="code" href="classscrimmage_1_1External.html#abef5ee16a206f57b9b56fb0eb6729895">param_server_</a>, <a class="code" href="classscrimmage_1_1External.html#a933a6df36f2dcfe2be1cc364d15d4443">global_services_</a>, plugin_tags,</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            param_override_func, debug_level);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (!ent_success) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;External::create_entity() failed on entity_-&gt;init()&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a0be79b227d04b4558bb6145a84af4ebd">motion_dt_</a> = <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;dt() * 1.0 / <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;motion_multiplier();</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;controllers().size() &gt; 0) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// if vars is not set then we assume it should match the last controller.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="comment">// we need to make sure we do not mess up the order of the indexes</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">// because the controller outputs have already been declared</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keyword">auto</span> &amp;ctrl = <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;controllers().back();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keyword">auto</span> &amp;var_idx = ctrl-&gt;vars().output_variable_index();</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classscrimmage_1_1External.html#ad96e7c9f5f17252202f141d9c9cd59f3">vars</a>.<a class="code" href="classscrimmage_1_1VariableIO.html#aa6b12035fb51a9aa81ffe3615eea6217">input_variable_index</a>().empty()) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="keywordtype">int</span> idx = 0;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keyword">auto</span> matches_idx = [&amp;](<span class="keyword">auto</span> &amp;kv) {<span class="keywordflow">return</span> kv.second == idx;};</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keyword">auto</span> it = br::find_if(var_idx, matches_idx);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordflow">while</span> (it != var_idx.end()) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <a class="code" href="classscrimmage_1_1External.html#ad96e7c9f5f17252202f141d9c9cd59f3">vars</a>.<a class="code" href="classscrimmage_1_1VariableIO.html#a3bdaba914cd30bde518e6e5705e01b43">add_input_variable</a>(it-&gt;first);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="comment">// cppcheck-suppress unreadVariable</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                idx++;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                it = br::find_if(var_idx, matches_idx);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="namespacescrimmage.html#a5e908f79257a2582a17398519b9c9647">connect</a>(ctrl-&gt;vars(), <a class="code" href="classscrimmage_1_1External.html#ad96e7c9f5f17252202f141d9c9cd59f3">vars</a>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacescrimmage.html#ae124c7a839ccebe20480e25a1c4988ee">verify_io_connection</a>(<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;controllers().back()-&gt;vars(), <a class="code" href="classscrimmage_1_1External.html#ad96e7c9f5f17252202f141d9c9cd59f3">vars</a>)) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;VariableIO Error: &quot;</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                      &lt;&lt; ctrl-&gt;name()</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; does not provide inputs required by the External class.&quot;</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                      &lt;&lt; std::endl;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <a class="code" href="namespacescrimmage.html#a1a42f0f8246cd1ce51bc7613aeda2bd8">print_io_error</a>(<span class="stringliteral">&quot;External&quot;</span>, <a class="code" href="classscrimmage_1_1External.html#ad96e7c9f5f17252202f141d9c9cd59f3">vars</a>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            std::cout &lt;&lt; ctrl-&gt;name() &lt;&lt; <span class="stringliteral">&quot; currently provides the following: &quot;</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            br::copy(var_idx | ba::map_keys,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                     std::ostream_iterator&lt;std::string&gt;(std::cout, <span class="stringliteral">&quot;, &quot;</span>));</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a27d7c600b2343bdea6cfe21dc2d367b7">  257</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classscrimmage_1_1External.html#a27d7c600b2343bdea6cfe21dc2d367b7">External::setup_logging</a>(<span class="keyword">const</span> std::string &amp;log_dir) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;set_log_dir(log_dir);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    std::string output_type = <span class="keyword">get</span>(<span class="stringliteral">&quot;output_type&quot;</span>, <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;params(), std::string(<span class="stringliteral">&quot;all&quot;</span>));</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;create_log_dir();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">bool</span> enable_log =</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        output_type.find(<span class="stringliteral">&quot;all&quot;</span>) != std::string::npos ||</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        output_type.find(<span class="stringliteral">&quot;frames&quot;</span>) != std::string::npos;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ac3279307c0d738fcc860bdf5808c43c4">log_</a>-&gt;set_enable_log(enable_log);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ac3279307c0d738fcc860bdf5808c43c4">log_</a>-&gt;init(<a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>-&gt;log_dir(), <a class="code" href="classscrimmage_1_1Log.html#afe196984c16a53bc7690affee005c16faec5882ada9525edb5866c32b8ac73064">Log::WRITE</a>);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a8959fc9d4cba22e720fc0bedea38e765">  271</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classscrimmage_1_1External.html#a8959fc9d4cba22e720fc0bedea38e765">External::step</a>(<span class="keywordtype">double</span> t) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.lock();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordtype">double</span> dt = std::isnan(<a class="code" href="classscrimmage_1_1External.html#a4335d4fde3f95af985c5592c1315b273">last_t_</a>) ? 0 : t - <a class="code" href="classscrimmage_1_1External.html#a4335d4fde3f95af985c5592c1315b273">last_t_</a>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">time_</a>-&gt;set_t(t);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">time_</a>-&gt;set_dt(dt);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    last_t_ = t;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.unlock();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classscrimmage_1_1External.html#acab091bf1e7c47025c8598edcdb4464c">call_update_contacts</a>(t)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.lock();</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// run main loops of plugins</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"></span>    <span class="keywordflow">for</span> (<a class="code" href="namespacescrimmage.html#a85eb0a47fbe1798b416e6c8a0755b6c5">AutonomyPtr</a> autonomy : <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;autonomies()) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        autonomy-&gt;step_autonomy(t, dt);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;kv : <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;sensors()) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="namespacescrimmage.html#ad426ea9051719a33d49b474755f536f0">SensorPtr</a> sensor = kv.second;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        sensor-&gt;step();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;setup_desired_state();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">int</span> num_steps = std::max(1.0, std::round(dt / <a class="code" href="classscrimmage_1_1External.html#a0be79b227d04b4558bb6145a84af4ebd">motion_dt_</a>));</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">double</span> temp_t = t - dt;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_steps; i++) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespacescrimmage.html#ae9883a6b46de4b9826fe5d7768744050">ControllerPtr</a> controller : <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;controllers()) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            controller-&gt;step(temp_t, <a class="code" href="classscrimmage_1_1External.html#a0be79b227d04b4558bb6145a84af4ebd">motion_dt_</a>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classscrimmage_1_1External.html#a2e0fc49e0df79e277c45774e7f59e217">enable_motion_</a>) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;motion()-&gt;step(temp_t, <a class="code" href="classscrimmage_1_1External.html#a0be79b227d04b4558bb6145a84af4ebd">motion_dt_</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        temp_t += <a class="code" href="classscrimmage_1_1External.html#a0be79b227d04b4558bb6145a84af4ebd">motion_dt_</a>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">ent_inters_</a>.empty()) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <a class="code" href="classscrimmage_1_1External.html#a79b64afe54b1228eccce20b677c0c3bd">update_ents</a>();</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespacescrimmage.html#a1907aa8ca5f47fe16b9639b110b4ec91">EntityInteractionPtr</a> ent_inter : <a class="code" href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">ent_inters_</a>) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            ent_inter-&gt;step_entity_interaction(<a class="code" href="classscrimmage_1_1External.html#a21836b35209277f4995f94fcff3b6065">ents_</a>, t, dt);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacescrimmage.html#ab7d3fe5e4e0cddb46b9763146f410a90">MetricsPtr</a> metrics : <a class="code" href="classscrimmage_1_1External.html#ae962c5970fd5e9132159423a52b54ef3">metrics_</a>) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        metrics-&gt;step_metrics(t, dt);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classscrimmage_1_1External.html#a161f576841fbc0f10fce07f37729e2d3">send_messages</a>()) {<a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.unlock(); <span class="keywordflow">return</span> <span class="keyword">false</span>;}</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">// shapes</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    scrimmage_proto::Shapes shapes;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    shapes.set_time(t);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keyword">auto</span> add_clear_shapes = [&amp;](<span class="keyword">auto</span> p) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keyword">auto</span> add_shape = [&amp;](<span class="keyword">auto</span> &amp;shape) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            *shapes.add_shape() = *shape;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <a class="code" href="classscrimmage_1_1External.html#ac86a209fefda36544c971a2fbf87dd01">shape_queue_</a>.push(shape);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keyword">auto</span> max_size = this-&gt;<a class="code" href="classscrimmage_1_1External.html#a29e7e608f669a481aa9ba07b4e034524">shape_queue_max_size</a>();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classscrimmage_1_1External.html#ac86a209fefda36544c971a2fbf87dd01">shape_queue_</a>.size() &gt; max_size) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <a class="code" href="classscrimmage_1_1External.html#ac86a209fefda36544c971a2fbf87dd01">shape_queue_</a>.pop();</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        };</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        br::for_each(p-&gt;shapes(), add_shape);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        p-&gt;shapes().clear(); <span class="comment">// don&#39;t let shapes build up</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    };</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;autonomies(), add_clear_shapes);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;controllers(), add_clear_shapes);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;sensors() | ba::map_values, add_clear_shapes);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">ent_inters_</a>, add_clear_shapes);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    br::for_each(metrics_, add_clear_shapes);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ac3279307c0d738fcc860bdf5808c43c4">log_</a>-&gt;save_frame(<a class="code" href="namespacescrimmage.html#aaedf89789a49f693abcf15eecdafd9e6">create_frame</a>(t, <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;contacts()));</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ac3279307c0d738fcc860bdf5808c43c4">log_</a>-&gt;save_shapes(shapes);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// Send shapes over configured grpc network interfaces</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> interface : <a class="code" href="classscrimmage_1_1External.html#af6680ba40442eb5f344fdeb2cb6de709">outgoing_interfaces_</a>) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        interface-&gt;send_shapes(shapes);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        interface-&gt;send_frame(t, <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;contacts());</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.unlock();</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a479753ea5c71a0c12316bf9cf3cb0014">  359</a></span>&#160;<a class="code" href="namespacescrimmage.html#a17ade668c6d5b5e127ec503e42eb22fa">EntityPtr</a> &amp;<a class="code" href="classscrimmage_1_1External.html#a479753ea5c71a0c12316bf9cf3cb0014">External::entity</a>() {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a161f576841fbc0f10fce07f37729e2d3">  363</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classscrimmage_1_1External.html#a161f576841fbc0f10fce07f37729e2d3">External::send_messages</a>() {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// Send messages that are published by a SCRIMMAGE plugin to the external</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// network (e.g., ROS, MOOS)</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keyword">auto</span> to_publisher = [&amp;](<span class="keyword">auto</span> &amp;network_device) {<span class="keywordflow">return</span> std::dynamic_pointer_cast&lt;<a class="code" href="classscrimmage_1_1Publisher.html">Publisher</a>&gt;(network_device);};</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keyword">auto</span> has_callback = [&amp;](<span class="keyword">auto</span> &amp;pub) {<span class="keywordflow">return</span> pub &amp;&amp; pub-&gt;<a class="code" href="classscrimmage_1_1Publisher.html#adb7ac177168ce7ba2b8f9473214f8b71">callback</a>;};</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;topic_device_kv : <a class="code" href="classscrimmage_1_1External.html#a0b87e4c91367deca3bbf190ebbadb436">pubsub_</a>-&gt;pubs() | ba::map_values) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;dev_list : topic_device_kv | ba::map_values) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> pub : dev_list |</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                            ba::transformed(to_publisher) |</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                            ba::filtered(has_callback)) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span> msg : pub-&gt;pop_msgs()) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    pub-&gt;callback(msg);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">// any messages that are not linked to the external network can now</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// be sent via the internal scrimmage messaging system</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keyword">auto</span> &amp;pubs = <a class="code" href="classscrimmage_1_1External.html#a0b87e4c91367deca3bbf190ebbadb436">pubsub_</a>-&gt;pubs();</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keyword">auto</span> &amp;subs = <a class="code" href="classscrimmage_1_1External.html#a0b87e4c91367deca3bbf190ebbadb436">pubsub_</a>-&gt;subs();</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;network : *<a class="code" href="classscrimmage_1_1External.html#a7bdc81c4f4aa5d36c8164b80acf9e027">networks_</a> | ba::map_values) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keyword">auto</span> name = network-&gt;name();</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> (!network-&gt;step(pubs[name], subs[name])) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;Network failed: &quot;</span> &lt;&lt; name &lt;&lt; std::endl;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;autonomies(), <a class="code" href="namespacescrimmage.html#ab358b3718f38b28542d2020a92a52ac4">run_callbacks</a>);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;controllers(), <a class="code" href="namespacescrimmage.html#ab358b3718f38b28542d2020a92a52ac4">run_callbacks</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">ent_inters_</a>, <a class="code" href="namespacescrimmage.html#ab358b3718f38b28542d2020a92a52ac4">run_callbacks</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#ae962c5970fd5e9132159423a52b54ef3">metrics_</a>, <a class="code" href="namespacescrimmage.html#ab358b3718f38b28542d2020a92a52ac4">run_callbacks</a>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;sensors() | ba::map_values, <a class="code" href="namespacescrimmage.html#ab358b3718f38b28542d2020a92a52ac4">run_callbacks</a>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#acab091bf1e7c47025c8598edcdb4464c">  401</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classscrimmage_1_1External.html#acab091bf1e7c47025c8598edcdb4464c">External::call_update_contacts</a>(<span class="keywordtype">double</span> t) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.lock();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classscrimmage_1_1External.html#a7ca5de51f350bd9f5d56cba567cf5b1c">update_contacts_task</a>.<a class="code" href="classscrimmage_1_1DelayedTask.html#acb1881072952a202dd63b3b6f9498a17">update</a>(t).first) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keyword">auto</span> rtree = <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;rtree(); <span class="comment">// rtree is a shared_ptr</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">if</span> (!rtree) {<a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.unlock(); <span class="keywordflow">return</span> <span class="keyword">false</span>;}</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        rtree-&gt;init(<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;contacts()-&gt;size());</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;kv : *<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;contacts()) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            rtree-&gt;add(kv.second.state()-&gt;pos(), kv.second.id());</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <a class="code" href="classscrimmage_1_1External.html#a79b64afe54b1228eccce20b677c0c3bd">update_ents</a>();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.unlock();</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a3ae739a52607f79c2e16106931621420">  416</a></span>&#160;<a class="code" href="namespacescrimmage.html#a923de8354cb1c37f0b66bb40011b4ef4">MissionParsePtr</a> <a class="code" href="classscrimmage_1_1External.html#a3ae739a52607f79c2e16106931621420">External::mp</a>() {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">mp_</a>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a79b64afe54b1228eccce20b677c0c3bd">  420</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classscrimmage_1_1External.html#a79b64afe54b1228eccce20b677c0c3bd">External::update_ents</a>() {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">ent_inters_</a>.empty() &amp;&amp; !<a class="code" href="classscrimmage_1_1External.html#ae962c5970fd5e9132159423a52b54ef3">metrics_</a>.empty()) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keyword">auto</span> &amp;contacts = *<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;contacts();</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ab675b68837b5fa8c217a8f1515654382">id_to_team_map_</a>-&gt;clear();</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#afb226b57318a74990023a0d3f996c888">id_to_ent_map_</a>-&gt;clear();</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a21836b35209277f4995f94fcff3b6065">ents_</a>.clear();</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;kv : contacts) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <a class="code" href="classscrimmage_1_1ID.html">ID</a> &amp;<span class="keywordtype">id</span> = kv.second.<a class="code" href="classscrimmage_1_1ID.html#a267790607275f65ffe38da2e61101bf5">id</a>();</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        (*id_to_team_map_)[<span class="keywordtype">id</span>.id()] = <span class="keywordtype">id</span>.team_id();</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keyword">auto</span> ent = <span class="keywordtype">id</span>.id() == <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;id().id() ? <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a> : std::make_shared&lt;Entity&gt;();</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        ent-&gt;id() = id;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span> (ent-&gt;state()) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            *ent-&gt;state() = *kv.second.state();</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            ent-&gt;state() = kv.second.state();</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="classscrimmage_1_1External.html#a21836b35209277f4995f94fcff3b6065">ents_</a>.push_back(ent);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        (*id_to_ent_map_)[<span class="keywordtype">id</span>.id()] = ent;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#ae84a6915da51d9b2f5946b5b48971a21">  445</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classscrimmage_1_1External.html#ae84a6915da51d9b2f5946b5b48971a21">External::close</a>() {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.lock();</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;close(<a class="code" href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">time_</a>-&gt;t());</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a> = std::make_shared&lt;Entity&gt;();</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keyword">auto</span> <a class="code" href="classscrimmage_1_1External.html#ae84a6915da51d9b2f5946b5b48971a21">close</a> = [&amp;](<span class="keyword">auto</span> p) {p-&gt;close(<a class="code" href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">time_</a>-&gt;t());};</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">ent_inters_</a>, close);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    br::for_each(<a class="code" href="classscrimmage_1_1External.html#ae962c5970fd5e9132159423a52b54ef3">metrics_</a>, close);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">mutex</a>.unlock();</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#ac1d3c34d43faf4b86fa70074f90d0bef">  456</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classscrimmage_1_1External.html#ac1d3c34d43faf4b86fa70074f90d0bef">External::enable_outgoing_interface</a>(<span class="keyword">const</span> std::string &amp;ip, <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;port) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="namespacescrimmage.html#a3717e7df6ad78cf99b54e83c8f8a8702">InterfacePtr</a> <span class="keyword">interface </span>= std::make_shared&lt;Interface&gt;();</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    interface-&gt;init_network(<a class="code" href="classscrimmage_1_1Interface.html#a8bc221b36708df4c6399f7660534704ba873b9ab549b94e777f5d2044b3d433be">Interface::client</a>, ip, port);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    interface-&gt;send_contact_visual(<a class="code" href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">entity_</a>-&gt;contact_visual());</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#af6680ba40442eb5f344fdeb2cb6de709">outgoing_interfaces_</a>.push_back(interface);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a9b0213011d5254342a8661ec58d7e7cf">  465</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classscrimmage_1_1External.html#a9b0213011d5254342a8661ec58d7e7cf">External::disable_outgoing_interfaces</a>() {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#af6680ba40442eb5f344fdeb2cb6de709">outgoing_interfaces_</a>.clear();</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="classscrimmage_1_1External.html#a14f5a54a9c3757a3071590c03d096989">  470</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classscrimmage_1_1External.html#a14f5a54a9c3757a3071590c03d096989">External::set_time</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;t, <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;dt) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">time_</a>-&gt;set_t(t);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">time_</a>-&gt;set_dt(dt);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;}</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;} <span class="comment">// namespace scrimmage</span></div><div class="ttc" id="classscrimmage_1_1External_html_a57dbd970c100eb9e1918b563658310f7"><div class="ttname"><a href="classscrimmage_1_1External.html#a57dbd970c100eb9e1918b563658310f7">scrimmage::External::time_</a></div><div class="ttdeci">TimePtr time_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00125">External.h:125</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_ac3279307c0d738fcc860bdf5808c43c4"><div class="ttname"><a href="classscrimmage_1_1External.html#ac3279307c0d738fcc860bdf5808c43c4">scrimmage::External::log_</a></div><div class="ttdeci">std::shared_ptr&lt; Log &gt; log_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00122">External.h:122</a></div></div>
<div class="ttc" id="namespacescrimmage_html_a3d47a78c5b6edf6dd7836d57ab79f320"><div class="ttname"><a href="namespacescrimmage.html#a3d47a78c5b6edf6dd7836d57ab79f320">scrimmage::RandomPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Random &gt; RandomPtr</div><div class="ttdef"><b>Definition:</b> <a href="Random_8h_source.html#l00072">Random.h:72</a></div></div>
<div class="ttc" id="classscrimmage_1_1GlobalService_html"><div class="ttname"><a href="classscrimmage_1_1GlobalService.html">scrimmage::GlobalService</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalService_8h_source.html#l00050">GlobalService.h:50</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a9b0213011d5254342a8661ec58d7e7cf"><div class="ttname"><a href="classscrimmage_1_1External.html#a9b0213011d5254342a8661ec58d7e7cf">scrimmage::External::disable_outgoing_interfaces</a></div><div class="ttdeci">bool disable_outgoing_interfaces()</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00465">External.cpp:465</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a14f5a54a9c3757a3071590c03d096989"><div class="ttname"><a href="classscrimmage_1_1External.html#a14f5a54a9c3757a3071590c03d096989">scrimmage::External::set_time</a></div><div class="ttdeci">void set_time(const double &amp;t, const double &amp;dt)</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00470">External.cpp:470</a></div></div>
<div class="ttc" id="classscrimmage_1_1Entity_html"><div class="ttname"><a href="classscrimmage_1_1Entity.html">scrimmage::Entity</a></div><div class="ttdef"><b>Definition:</b> <a href="Entity_8h_source.html#l00063">Entity.h:63</a></div></div>
<div class="ttc" id="namespacescrimmage_html_aa24d13008157fe3a539bb06b4ce5fb1d"><div class="ttname"><a href="namespacescrimmage.html#aa24d13008157fe3a539bb06b4ce5fb1d">scrimmage::create_networks</a></div><div class="ttdeci">bool create_networks(const SimUtilsInfo &amp;info, NetworkMap &amp;networks, const std::set&lt; std::string &gt; &amp;plugin_tags={}, std::function&lt; void(std::map&lt; std::string, std::string &gt; &amp;)&gt; param_override_func=[](std::map&lt; std::string, std::string &gt; &amp;){}, const int &amp;debug_level=0)</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8cpp_source.html#l00229">SimUtils.cpp:229</a></div></div>
<div class="ttc" id="namespacescrimmage_html_a3717e7df6ad78cf99b54e83c8f8a8702"><div class="ttname"><a href="namespacescrimmage.html#a3717e7df6ad78cf99b54e83c8f8a8702">scrimmage::InterfacePtr</a></div><div class="ttdeci">std::shared_ptr&lt; Interface &gt; InterfacePtr</div><div class="ttdef"><b>Definition:</b> <a href="fwd__decl_8h_source.html#l00146">fwd_decl.h:146</a></div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html_a2637c167508d1f7a7822ab272d7ba293"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html#a2637c167508d1f7a7822ab272d7ba293">scrimmage::SimUtilsInfo::pubsub</a></div><div class="ttdeci">PubSubPtr pubsub</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00058">SimUtils.h:58</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_ae84a6915da51d9b2f5946b5b48971a21"><div class="ttname"><a href="classscrimmage_1_1External.html#ae84a6915da51d9b2f5946b5b48971a21">scrimmage::External::close</a></div><div class="ttdeci">void close()</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00445">External.cpp:445</a></div></div>
<div class="ttc" id="classscrimmage_1_1ID_html_a267790607275f65ffe38da2e61101bf5"><div class="ttname"><a href="classscrimmage_1_1ID.html#a267790607275f65ffe38da2e61101bf5">scrimmage::ID::id</a></div><div class="ttdeci">int id() const </div><div class="ttdef"><b>Definition:</b> <a href="ID_8cpp_source.html#l00050">ID.cpp:50</a></div></div>
<div class="ttc" id="Metrics_8h_html"><div class="ttname"><a href="Metrics_8h.html">Metrics.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="EntityInteraction_8h_html"><div class="ttname"><a href="EntityInteraction_8h.html">EntityInteraction.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="namespacescrimmage_html_a1a42f0f8246cd1ce51bc7613aeda2bd8"><div class="ttname"><a href="namespacescrimmage.html#a1a42f0f8246cd1ce51bc7613aeda2bd8">scrimmage::print_io_error</a></div><div class="ttdeci">void print_io_error(const std::string &amp;in_name, VariableIO &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="VariableIO_8cpp_source.html#l00204">VariableIO.cpp:204</a></div></div>
<div class="ttc" id="External_8h_html"><div class="ttname"><a href="External_8h.html">External.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1External_html_abfe2575c7c24a18b62523624bbaf2c48"><div class="ttname"><a href="classscrimmage_1_1External.html#abfe2575c7c24a18b62523624bbaf2c48">scrimmage::External::print_plugins</a></div><div class="ttdeci">void print_plugins(std::ostream &amp;out) const </div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00089">External.cpp:89</a></div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html_a230655400479c5feb80ea991625d8423"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html#a230655400479c5feb80ea991625d8423">scrimmage::SimUtilsInfo::id_to_team_map</a></div><div class="ttdeci">std::shared_ptr&lt; std::unordered_map&lt; int, int &gt; &gt; id_to_team_map</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00062">SimUtils.h:62</a></div></div>
<div class="ttc" id="classscrimmage_1_1Publisher_html"><div class="ttname"><a href="classscrimmage_1_1Publisher.html">scrimmage::Publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="Publisher_8h_source.html#l00049">Publisher.h:49</a></div></div>
<div class="ttc" id="classscrimmage_1_1ID_html"><div class="ttname"><a href="classscrimmage_1_1ID.html">scrimmage::ID</a></div><div class="ttdef"><b>Definition:</b> <a href="ID_8h_source.html#l00039">ID.h:39</a></div></div>
<div class="ttc" id="classscrimmage_1_1Publisher_html_adb7ac177168ce7ba2b8f9473214f8b71"><div class="ttname"><a href="classscrimmage_1_1Publisher.html#adb7ac177168ce7ba2b8f9473214f8b71">scrimmage::Publisher::callback</a></div><div class="ttdeci">std::function&lt; void(MessageBasePtr)&gt; callback</div><div class="ttdef"><b>Definition:</b> <a href="Publisher_8h_source.html#l00061">Publisher.h:61</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a7f8bea79329e6e30dd2909744ca6937b"><div class="ttname"><a href="classscrimmage_1_1External.html#a7f8bea79329e6e30dd2909744ca6937b">scrimmage::External::ent_inters_</a></div><div class="ttdeci">std::list&lt; EntityInteractionPtr &gt; ent_inters_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00117">External.h:117</a></div></div>
<div class="ttc" id="Time_8h_html"><div class="ttname"><a href="Time_8h.html">Time.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a479753ea5c71a0c12316bf9cf3cb0014"><div class="ttname"><a href="classscrimmage_1_1External.html#a479753ea5c71a0c12316bf9cf3cb0014">scrimmage::External::entity</a></div><div class="ttdeci">EntityPtr &amp; entity()</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00359">External.cpp:359</a></div></div>
<div class="ttc" id="classscrimmage_1_1Interface_html_a8bc221b36708df4c6399f7660534704ba873b9ab549b94e777f5d2044b3d433be"><div class="ttname"><a href="classscrimmage_1_1Interface.html#a8bc221b36708df4c6399f7660534704ba873b9ab549b94e777f5d2044b3d433be">scrimmage::Interface::client</a></div><div class="ttdef"><b>Definition:</b> <a href="Interface_8h_source.html#l00058">Interface.h:58</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace. </div></div>
<div class="ttc" id="RTree_8h_html"><div class="ttname"><a href="RTree_8h.html">RTree.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1External_html_ab675b68837b5fa8c217a8f1515654382"><div class="ttname"><a href="classscrimmage_1_1External.html#ab675b68837b5fa8c217a8f1515654382">scrimmage::External::id_to_team_map_</a></div><div class="ttdeci">std::shared_ptr&lt; std::unordered_map&lt; int, int &gt; &gt; id_to_team_map_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00129">External.h:129</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_ad96e7c9f5f17252202f141d9c9cd59f3"><div class="ttname"><a href="classscrimmage_1_1External.html#ad96e7c9f5f17252202f141d9c9cd59f3">scrimmage::External::vars</a></div><div class="ttdeci">VariableIO vars</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00097">External.h:97</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a29e7e608f669a481aa9ba07b4e034524"><div class="ttname"><a href="classscrimmage_1_1External.html#a29e7e608f669a481aa9ba07b4e034524">scrimmage::External::shape_queue_max_size</a></div><div class="ttdeci">std::size_t &amp; shape_queue_max_size()</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00093">External.h:93</a></div></div>
<div class="ttc" id="namespacescrimmage_html_a170223bf5a035097455993b6c9749522"><div class="ttname"><a href="namespacescrimmage.html#a170223bf5a035097455993b6c9749522">scrimmage::FileSearchPtr</a></div><div class="ttdeci">std::shared_ptr&lt; FileSearch &gt; FileSearchPtr</div><div class="ttdef"><b>Definition:</b> <a href="FileSearch_8h_source.html#l00073">FileSearch.h:73</a></div></div>
<div class="ttc" id="Log_8h_html"><div class="ttname"><a href="Log_8h.html">Log.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1PubSub_html"><div class="ttname"><a href="classscrimmage_1_1PubSub.html">scrimmage::PubSub</a></div><div class="ttdef"><b>Definition:</b> <a href="PubSub_8h_source.html#l00055">PubSub.h:55</a></div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html_a4b69cc9211a3193a340553ac52378d6a"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html#a4b69cc9211a3193a340553ac52378d6a">scrimmage::SimUtilsInfo::file_search</a></div><div class="ttdeci">FileSearchPtr file_search</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00056">SimUtils.h:56</a></div></div>
<div class="ttc" id="Sensor_8h_html"><div class="ttname"><a href="Sensor_8h.html">Sensor.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="namespacescrimmage_html_ab7d3fe5e4e0cddb46b9763146f410a90"><div class="ttname"><a href="namespacescrimmage.html#ab7d3fe5e4e0cddb46b9763146f410a90">scrimmage::MetricsPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Metrics &gt; MetricsPtr</div><div class="ttdef"><b>Definition:</b> <a href="fwd__decl_8h_source.html#l00152">fwd_decl.h:152</a></div></div>
<div class="ttc" id="Network_8h_html"><div class="ttname"><a href="Network_8h.html">Network.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1MissionParse_html"><div class="ttname"><a href="classscrimmage_1_1MissionParse.html">scrimmage::MissionParse</a></div><div class="ttdef"><b>Definition:</b> <a href="MissionParse_8h_source.html#l00082">MissionParse.h:82</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a2865c163954044accfc31a33aa8fe56d"><div class="ttname"><a href="classscrimmage_1_1External.html#a2865c163954044accfc31a33aa8fe56d">scrimmage::External::External</a></div><div class="ttdeci">External()</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00075">External.cpp:75</a></div></div>
<div class="ttc" id="namespacescrimmage_html_ae124c7a839ccebe20480e25a1c4988ee"><div class="ttname"><a href="namespacescrimmage.html#ae124c7a839ccebe20480e25a1c4988ee">scrimmage::verify_io_connection</a></div><div class="ttdeci">bool verify_io_connection(VariableIO &amp;output_plugin, VariableIO &amp;input_plugin)</div><div class="ttdef"><b>Definition:</b> <a href="VariableIO_8cpp_source.html#l00194">VariableIO.cpp:194</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a79b64afe54b1228eccce20b677c0c3bd"><div class="ttname"><a href="classscrimmage_1_1External.html#a79b64afe54b1228eccce20b677c0c3bd">scrimmage::External::update_ents</a></div><div class="ttdeci">void update_ents()</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00420">External.cpp:420</a></div></div>
<div class="ttc" id="classscrimmage_1_1Log_html_afe196984c16a53bc7690affee005c16faec5882ada9525edb5866c32b8ac73064"><div class="ttname"><a href="classscrimmage_1_1Log.html#afe196984c16a53bc7690affee005c16faec5882ada9525edb5866c32b8ac73064">scrimmage::Log::WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00079">Log.h:79</a></div></div>
<div class="ttc" id="GlobalService_8h_html"><div class="ttname"><a href="GlobalService_8h.html">GlobalService.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="namespacescrimmage_html_a5e908f79257a2582a17398519b9c9647"><div class="ttname"><a href="namespacescrimmage.html#a5e908f79257a2582a17398519b9c9647">scrimmage::connect</a></div><div class="ttdeci">void connect(VariableIO &amp;output, VariableIO &amp;input)</div><div class="ttdef"><b>Definition:</b> <a href="VariableIO_8cpp_source.html#l00158">VariableIO.cpp:158</a></div></div>
<div class="ttc" id="classscrimmage_1_1VariableIO_html_aa6b12035fb51a9aa81ffe3615eea6217"><div class="ttname"><a href="classscrimmage_1_1VariableIO.html#aa6b12035fb51a9aa81ffe3615eea6217">scrimmage::VariableIO::input_variable_index</a></div><div class="ttdeci">std::map&lt; std::string, int &gt; &amp; input_variable_index()</div><div class="ttdef"><b>Definition:</b> <a href="VariableIO_8cpp_source.html#l00088">VariableIO.cpp:88</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a8959fc9d4cba22e720fc0bedea38e765"><div class="ttname"><a href="classscrimmage_1_1External.html#a8959fc9d4cba22e720fc0bedea38e765">scrimmage::External::step</a></div><div class="ttdeci">bool step(double t)</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00271">External.cpp:271</a></div></div>
<div class="ttc" id="namespacescrimmage_html_ab358b3718f38b28542d2020a92a52ac4"><div class="ttname"><a href="namespacescrimmage.html#ab358b3718f38b28542d2020a92a52ac4">scrimmage::run_callbacks</a></div><div class="ttdeci">void run_callbacks(EntityPluginPtr plugin)</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8cpp_source.html#l00176">SimUtils.cpp:176</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a0be79b227d04b4558bb6145a84af4ebd"><div class="ttname"><a href="classscrimmage_1_1External.html#a0be79b227d04b4558bb6145a84af4ebd">scrimmage::External::motion_dt_</a></div><div class="ttdeci">double motion_dt_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00091">External.h:91</a></div></div>
<div class="ttc" id="FileSearch_8h_html"><div class="ttname"><a href="FileSearch_8h.html">FileSearch.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a673bcb7974404e98eb0b02724f073063"><div class="ttname"><a href="classscrimmage_1_1External.html#a673bcb7974404e98eb0b02724f073063">scrimmage::External::create_entity</a></div><div class="ttdeci">bool create_entity(const std::string &amp;mission_file, const std::string &amp;entity_tag, const std::string &amp;plugin_tags_str, int entity_id, int max_entities, double init_time, double init_dt, const std::string &amp;log_dir, std::function&lt; void(std::map&lt; std::string, std::string &gt; &amp;)&gt; param_override_func=[](std::map&lt; std::string, std::string &gt; &amp;){}, const std::string &amp;mission_file_overrides=&quot;&quot;, const int &amp;debug_level=0)</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00106">External.cpp:106</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a7ca5de51f350bd9f5d56cba567cf5b1c"><div class="ttname"><a href="classscrimmage_1_1External.html#a7ca5de51f350bd9f5d56cba567cf5b1c">scrimmage::External::update_contacts_task</a></div><div class="ttdeci">DelayedTask update_contacts_task</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00099">External.h:99</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_ac1d3c34d43faf4b86fa70074f90d0bef"><div class="ttname"><a href="classscrimmage_1_1External.html#ac1d3c34d43faf4b86fa70074f90d0bef">scrimmage::External::enable_outgoing_interface</a></div><div class="ttdeci">bool enable_outgoing_interface(const std::string &amp;ip, const int &amp;port)</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00456">External.cpp:456</a></div></div>
<div class="ttc" id="namespacescrimmage_html_aaedf89789a49f693abcf15eecdafd9e6"><div class="ttname"><a href="namespacescrimmage.html#aaedf89789a49f693abcf15eecdafd9e6">scrimmage::create_frame</a></div><div class="ttdeci">std::shared_ptr&lt; scrimmage_proto::Frame &gt; create_frame(double time, std::shared_ptr&lt; ContactMap &gt; &amp;contacts)</div><div class="ttdef"><b>Definition:</b> <a href="ProtoConversions_8cpp_source.html#l00277">ProtoConversions.cpp:277</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a27d7c600b2343bdea6cfe21dc2d367b7"><div class="ttname"><a href="classscrimmage_1_1External.html#a27d7c600b2343bdea6cfe21dc2d367b7">scrimmage::External::setup_logging</a></div><div class="ttdeci">void setup_logging(const std::string &amp;log_dir)</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00257">External.cpp:257</a></div></div>
<div class="ttc" id="namespacescrimmage_html_a521c93afebfa6772260f6a65ef38cc62"><div class="ttname"><a href="namespacescrimmage.html#a521c93afebfa6772260f6a65ef38cc62">scrimmage::ContactMapPtr</a></div><div class="ttdeci">std::shared_ptr&lt; ContactMap &gt; ContactMapPtr</div><div class="ttdef"><b>Definition:</b> <a href="Contact_8h_source.html#l00112">Contact.h:112</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_af6680ba40442eb5f344fdeb2cb6de709"><div class="ttname"><a href="classscrimmage_1_1External.html#af6680ba40442eb5f344fdeb2cb6de709">scrimmage::External::outgoing_interfaces_</a></div><div class="ttdeci">std::list&lt; InterfacePtr &gt; outgoing_interfaces_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00348">External.h:348</a></div></div>
<div class="ttc" id="namespacescrimmage_html_ae9883a6b46de4b9826fe5d7768744050"><div class="ttname"><a href="namespacescrimmage.html#ae9883a6b46de4b9826fe5d7768744050">scrimmage::ControllerPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Controller &gt; ControllerPtr</div><div class="ttdef"><b>Definition:</b> <a href="fwd__decl_8h_source.html#l00138">fwd_decl.h:138</a></div></div>
<div class="ttc" id="namespacescrimmage_html_a1907aa8ca5f47fe16b9639b110b4ec91"><div class="ttname"><a href="namespacescrimmage.html#a1907aa8ca5f47fe16b9639b110b4ec91">scrimmage::EntityInteractionPtr</a></div><div class="ttdeci">std::shared_ptr&lt; EntityInteraction &gt; EntityInteractionPtr</div><div class="ttdef"><b>Definition:</b> <a href="fwd__decl_8h_source.html#l00149">fwd_decl.h:149</a></div></div>
<div class="ttc" id="MotionModel_8h_html"><div class="ttname"><a href="MotionModel_8h.html">MotionModel.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a2e0fc49e0df79e277c45774e7f59e217"><div class="ttname"><a href="classscrimmage_1_1External.html#a2e0fc49e0df79e277c45774e7f59e217">scrimmage::External::enable_motion_</a></div><div class="ttdeci">bool enable_motion_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00116">External.h:116</a></div></div>
<div class="ttc" id="namespacescrimmage_html_a923de8354cb1c37f0b66bb40011b4ef4"><div class="ttname"><a href="namespacescrimmage.html#a923de8354cb1c37f0b66bb40011b4ef4">scrimmage::MissionParsePtr</a></div><div class="ttdeci">std::shared_ptr&lt; MissionParse &gt; MissionParsePtr</div><div class="ttdef"><b>Definition:</b> <a href="fwd__decl_8h_source.html#l00132">fwd_decl.h:132</a></div></div>
<div class="ttc" id="Random_8h_html"><div class="ttname"><a href="Random_8h.html">Random.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="namespacescrimmage_html_ac60a75c7947b3d87cbaa1060cb430af4"><div class="ttname"><a href="namespacescrimmage.html#ac60a75c7947b3d87cbaa1060cb430af4">scrimmage::AttributeMap</a></div><div class="ttdeci">std::map&lt; std::string, std::map&lt; std::string, std::string &gt; &gt; AttributeMap</div><div class="ttdef"><b>Definition:</b> <a href="Entity_8h_source.html#l00061">Entity.h:61</a></div></div>
<div class="ttc" id="namespacescrimmage_html_a85eb0a47fbe1798b416e6c8a0755b6c5"><div class="ttname"><a href="namespacescrimmage.html#a85eb0a47fbe1798b416e6c8a0755b6c5">scrimmage::AutonomyPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Autonomy &gt; AutonomyPtr</div><div class="ttdef"><b>Definition:</b> <a href="fwd__decl_8h_source.html#l00056">fwd_decl.h:56</a></div></div>
<div class="ttc" id="SimUtils_8h_html"><div class="ttname"><a href="SimUtils_8h.html">SimUtils.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="namespacescrimmage_html_a5793c16ebb382bf91a7a83d536fe49a7"><div class="ttname"><a href="namespacescrimmage.html#a5793c16ebb382bf91a7a83d536fe49a7">scrimmage::create_ent_inters</a></div><div class="ttdeci">bool create_ent_inters(const SimUtilsInfo &amp;info, ContactMapPtr contacts, std::list&lt; scrimmage_proto::ShapePtr &gt; &amp;shapes, std::list&lt; EntityInteractionPtr &gt; &amp;ent_inters, const GlobalServicePtr global_services, const std::set&lt; std::string &gt; &amp;plugin_tags={}, std::function&lt; void(std::map&lt; std::string, std::string &gt; &amp;)&gt; param_override_func=[](std::map&lt; std::string, std::string &gt; &amp;){}, const int &amp;debug_level=0)</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8cpp_source.html#l00058">SimUtils.cpp:58</a></div></div>
<div class="ttc" id="classscrimmage_1_1DelayedTask_html_acb1881072952a202dd63b3b6f9498a17"><div class="ttname"><a href="classscrimmage_1_1DelayedTask.html#acb1881072952a202dd63b3b6f9498a17">scrimmage::DelayedTask::update</a></div><div class="ttdeci">std::pair&lt; bool, bool &gt; update(double t)</div><div class="ttdef"><b>Definition:</b> <a href="DelayedTask_8cpp_source.html#l00058">DelayedTask.cpp:58</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a161f576841fbc0f10fce07f37729e2d3"><div class="ttname"><a href="classscrimmage_1_1External.html#a161f576841fbc0f10fce07f37729e2d3">scrimmage::External::send_messages</a></div><div class="ttdeci">bool send_messages()</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00363">External.cpp:363</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a21836b35209277f4995f94fcff3b6065"><div class="ttname"><a href="classscrimmage_1_1External.html#a21836b35209277f4995f94fcff3b6065">scrimmage::External::ents_</a></div><div class="ttdeci">std::list&lt; EntityPtr &gt; ents_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00131">External.h:131</a></div></div>
<div class="ttc" id="classscrimmage_1_1Time_html"><div class="ttname"><a href="classscrimmage_1_1Time.html">scrimmage::Time</a></div><div class="ttdef"><b>Definition:</b> <a href="Time_8h_source.html#l00040">Time.h:40</a></div></div>
<div class="ttc" id="classscrimmage_1_1ParameterServer_html"><div class="ttname"><a href="classscrimmage_1_1ParameterServer.html">scrimmage::ParameterServer</a></div><div class="ttdef"><b>Definition:</b> <a href="ParameterServer_8h_source.html#l00053">ParameterServer.h:53</a></div></div>
<div class="ttc" id="namespacescrimmage_html_a17ade668c6d5b5e127ec503e42eb22fa"><div class="ttname"><a href="namespacescrimmage.html#a17ade668c6d5b5e127ec503e42eb22fa">scrimmage::EntityPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Entity &gt; EntityPtr</div><div class="ttdef"><b>Definition:</b> <a href="Entity_8h_source.html#l00246">Entity.h:246</a></div></div>
<div class="ttc" id="Controller_8h_html"><div class="ttname"><a href="Controller_8h.html">Controller.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1PluginManager_html"><div class="ttname"><a href="classscrimmage_1_1PluginManager.html">scrimmage::PluginManager</a></div><div class="ttdef"><b>Definition:</b> <a href="PluginManager_8h_source.html#l00078">PluginManager.h:78</a></div></div>
<div class="ttc" id="namespacescrimmage_html"><div class="ttname"><a href="namespacescrimmage.html">scrimmage</a></div><div class="ttdef"><b>Definition:</b> <a href="Autonomy_8h_source.html#l00044">Autonomy.h:44</a></div></div>
<div class="ttc" id="classscrimmage_1_1VariableIO_html_a3bdaba914cd30bde518e6e5705e01b43"><div class="ttname"><a href="classscrimmage_1_1VariableIO.html#a3bdaba914cd30bde518e6e5705e01b43">scrimmage::VariableIO::add_input_variable</a></div><div class="ttdeci">int add_input_variable(const std::string &amp;var)</div><div class="ttdef"><b>Definition:</b> <a href="VariableIO_8cpp_source.html#l00092">VariableIO.cpp:92</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_afb226b57318a74990023a0d3f996c888"><div class="ttname"><a href="classscrimmage_1_1External.html#afb226b57318a74990023a0d3f996c888">scrimmage::External::id_to_ent_map_</a></div><div class="ttdeci">std::shared_ptr&lt; std::unordered_map&lt; int, EntityPtr &gt; &gt; id_to_ent_map_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00130">External.h:130</a></div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html_a6439937c5a654eda94ec0588685358b5"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html#a6439937c5a654eda94ec0588685358b5">scrimmage::SimUtilsInfo::random</a></div><div class="ttdeci">RandomPtr random</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00061">SimUtils.h:61</a></div></div>
<div class="ttc" id="PluginManager_8h_html"><div class="ttname"><a href="PluginManager_8h.html">PluginManager.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html_a716ee3642d3a08c1e8791c4c0317515b"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html#a716ee3642d3a08c1e8791c4c0317515b">scrimmage::SimUtilsInfo::rtree</a></div><div class="ttdeci">RTreePtr rtree</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00057">SimUtils.h:57</a></div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html_a43e723837b00a050b6a026a85508ab31"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html#a43e723837b00a050b6a026a85508ab31">scrimmage::SimUtilsInfo::id_to_ent_map</a></div><div class="ttdeci">std::shared_ptr&lt; std::unordered_map&lt; int, EntityPtr &gt; &gt; id_to_ent_map</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00063">SimUtils.h:63</a></div></div>
<div class="ttc" id="Autonomy_8h_html"><div class="ttname"><a href="Autonomy_8h.html">Autonomy.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1External_html_acab091bf1e7c47025c8598edcdb4464c"><div class="ttname"><a href="classscrimmage_1_1External.html#acab091bf1e7c47025c8598edcdb4464c">scrimmage::External::call_update_contacts</a></div><div class="ttdeci">bool call_update_contacts(double t)</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00401">External.cpp:401</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a50ed2f5bd4cb90f9d9425bec2f9a0ace"><div class="ttname"><a href="classscrimmage_1_1External.html#a50ed2f5bd4cb90f9d9425bec2f9a0ace">scrimmage::External::entity_</a></div><div class="ttdeci">EntityPtr entity_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00115">External.h:115</a></div></div>
<div class="ttc" id="classscrimmage_1_1FileSearch_html"><div class="ttname"><a href="classscrimmage_1_1FileSearch.html">scrimmage::FileSearch</a></div><div class="ttdef"><b>Definition:</b> <a href="FileSearch_8h_source.html#l00047">FileSearch.h:47</a></div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html_a7f89ca4e2c18425d51f47c2560a507cb"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html#a7f89ca4e2c18425d51f47c2560a507cb">scrimmage::SimUtilsInfo::plugin_manager</a></div><div class="ttdeci">PluginManagerPtr plugin_manager</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00055">SimUtils.h:55</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a00364a7bd776fcc9540c5f937dd8ede0"><div class="ttname"><a href="classscrimmage_1_1External.html#a00364a7bd776fcc9540c5f937dd8ede0">scrimmage::External::mp_</a></div><div class="ttdeci">MissionParsePtr mp_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00128">External.h:128</a></div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html">scrimmage::SimUtilsInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00053">SimUtils.h:53</a></div></div>
<div class="ttc" id="classscrimmage_1_1FileSearch_html_a2f43920f05f0c385988681750cd81508"><div class="ttname"><a href="classscrimmage_1_1FileSearch.html#a2f43920f05f0c385988681750cd81508">scrimmage::FileSearch::find_mission</a></div><div class="ttdeci">boost::optional&lt; std::string &gt; find_mission(std::string mission, bool verbose=false)</div><div class="ttdoc">finds a mission file </div><div class="ttdef"><b>Definition:</b> <a href="FileSearch_8cpp_source.html#l00056">FileSearch.cpp:56</a></div></div>
<div class="ttc" id="ParseUtils_8h_html"><div class="ttname"><a href="ParseUtils_8h.html">ParseUtils.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a4335d4fde3f95af985c5592c1315b273"><div class="ttname"><a href="classscrimmage_1_1External.html#a4335d4fde3f95af985c5592c1315b273">scrimmage::External::last_t_</a></div><div class="ttdeci">double last_t_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00123">External.h:123</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_abef5ee16a206f57b9b56fb0eb6729895"><div class="ttname"><a href="classscrimmage_1_1External.html#abef5ee16a206f57b9b56fb0eb6729895">scrimmage::External::param_server_</a></div><div class="ttdeci">ParameterServerPtr param_server_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00126">External.h:126</a></div></div>
<div class="ttc" id="Interface_8h_html"><div class="ttname"><a href="Interface_8h.html">Interface.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="classscrimmage_1_1Log_html"><div class="ttname"><a href="classscrimmage_1_1Log.html">scrimmage::Log</a></div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00060">Log.h:60</a></div></div>
<div class="ttc" id="MissionParse_8h_html"><div class="ttname"><a href="MissionParse_8h.html">MissionParse.h</a></div><div class="ttdoc">Brief file description. </div></div>
<div class="ttc" id="namespacescrimmage_html_ab7ce57ecde5f7e0a5489f75fa840b57a"><div class="ttname"><a href="namespacescrimmage.html#ab7ce57ecde5f7e0a5489f75fa840b57a">scrimmage::create_metrics</a></div><div class="ttdeci">bool create_metrics(const SimUtilsInfo &amp;info, ContactMapPtr contacts, std::list&lt; MetricsPtr &gt; &amp;metrics_list, const std::set&lt; std::string &gt; &amp;plugin_tags={}, std::function&lt; void(std::map&lt; std::string, std::string &gt; &amp;)&gt; param_override_func=[](std::map&lt; std::string, std::string &gt; &amp;){}, const int &amp;debug_level=0)</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8cpp_source.html#l00123">SimUtils.cpp:123</a></div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html_a3da5af1536ce6a765cc94051e6acfa08"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html#a3da5af1536ce6a765cc94051e6acfa08">scrimmage::SimUtilsInfo::mp</a></div><div class="ttdeci">MissionParsePtr mp</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00054">SimUtils.h:54</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a7bdc81c4f4aa5d36c8164b80acf9e027"><div class="ttname"><a href="classscrimmage_1_1External.html#a7bdc81c4f4aa5d36c8164b80acf9e027">scrimmage::External::networks_</a></div><div class="ttdeci">NetworkMapPtr networks_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00119">External.h:119</a></div></div>
<div class="ttc" id="structscrimmage_1_1SimUtilsInfo_html_a456ce81c13dd8019dc76b219dbcdf256"><div class="ttname"><a href="structscrimmage_1_1SimUtilsInfo.html#a456ce81c13dd8019dc76b219dbcdf256">scrimmage::SimUtilsInfo::time</a></div><div class="ttdeci">TimePtr time</div><div class="ttdef"><b>Definition:</b> <a href="SimUtils_8h_source.html#l00059">SimUtils.h:59</a></div></div>
<div class="ttc" id="namespacescrimmage_html_ad426ea9051719a33d49b474755f536f0"><div class="ttname"><a href="namespacescrimmage.html#ad426ea9051719a33d49b474755f536f0">scrimmage::SensorPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Sensor &gt; SensorPtr</div><div class="ttdef"><b>Definition:</b> <a href="fwd__decl_8h_source.html#l00141">fwd_decl.h:141</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_ae962c5970fd5e9132159423a52b54ef3"><div class="ttname"><a href="classscrimmage_1_1External.html#ae962c5970fd5e9132159423a52b54ef3">scrimmage::External::metrics_</a></div><div class="ttdeci">std::list&lt; MetricsPtr &gt; metrics_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00118">External.h:118</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_ae377aad46d79f38642d34055a3b08d67"><div class="ttname"><a href="classscrimmage_1_1External.html#ae377aad46d79f38642d34055a3b08d67">scrimmage::External::mutex</a></div><div class="ttdeci">std::mutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00098">External.h:98</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a933a6df36f2dcfe2be1cc364d15d4443"><div class="ttname"><a href="classscrimmage_1_1External.html#a933a6df36f2dcfe2be1cc364d15d4443">scrimmage::External::global_services_</a></div><div class="ttdeci">GlobalServicePtr global_services_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00127">External.h:127</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a3ae739a52607f79c2e16106931621420"><div class="ttname"><a href="classscrimmage_1_1External.html#a3ae739a52607f79c2e16106931621420">scrimmage::External::mp</a></div><div class="ttdeci">MissionParsePtr mp()</div><div class="ttdef"><b>Definition:</b> <a href="External_8cpp_source.html#l00416">External.cpp:416</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a0b87e4c91367deca3bbf190ebbadb436"><div class="ttname"><a href="classscrimmage_1_1External.html#a0b87e4c91367deca3bbf190ebbadb436">scrimmage::External::pubsub_</a></div><div class="ttdeci">PubSubPtr pubsub_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00124">External.h:124</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_ac86a209fefda36544c971a2fbf87dd01"><div class="ttname"><a href="classscrimmage_1_1External.html#ac86a209fefda36544c971a2fbf87dd01">scrimmage::External::shape_queue_</a></div><div class="ttdeci">ShapeQueue shape_queue_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00134">External.h:134</a></div></div>
<div class="ttc" id="classscrimmage_1_1External_html_a9926a795157304cdd41f4c80f1279585"><div class="ttname"><a href="classscrimmage_1_1External.html#a9926a795157304cdd41f4c80f1279585">scrimmage::External::plugin_manager_</a></div><div class="ttdeci">PluginManagerPtr plugin_manager_</div><div class="ttdef"><b>Definition:</b> <a href="External_8h_source.html#l00121">External.h:121</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b6f0bb288e976a059ae88387d5b9ae90.html">entity</a></li><li class="navelem"><a class="el" href="External_8cpp.html">External.cpp</a></li>
    <li class="footer">Generated on Tue Apr 28 2020 19:49:51 for SCRIMMAGE by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
